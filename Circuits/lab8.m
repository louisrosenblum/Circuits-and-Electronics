% Anthony Rosenblum
% EELE 203
% Lowpass Filter Lab
% 6/5/2018

%%

     
%%

t = [1,2,5,7,9,10,20,50,70,90,100,200,500,700,800,900,950,999,1000,1050,1100,1200,2000,3000,3800,3900,3950,3999,4000,4050,4100,4200,5000,7000,9000,10000,20000,50000,70000,90000,100000,200000,500000,700000,900000,1000000,2000000,5000000]

vin = [1.06,1.04,1.04,1.01,1.01,1.01,1.01,1,1.00,0.991,0.990,0.990,0.985,0.987,.986 ,.986,.986,.987,.987,.987,.988,.989,.993,1,1.01,1.01,1.013,1.013,1.01,1.01,1.014,1.01,1.018,1.02,1.03,1.03,1.04,1.04,1.04,1.04,1.03,1.04,1.04,1.03,1.02,1.02,.995,.880]

vout = [1.01,1.02,1.01,.988,.990,.991,.988,.985,.984,.984,.983,.982,.976,.963,.946,.918,.897,.879,.871,.842,.809,.739,.236,.071,.034,.033,.031,.03,.03,.028,.027,.025,.015,.0057,.0027,.0021,.00047,0.0003,.0003,.00033,.00035,.00048,.0016,.0024,.0042,.0016,.0055,.0114]

g = 20*log10(vout./vin);

semilogx(t,g)
grid
title('Experimental Bode Magnitude Plot')
xlabel('Frequency (hz)')
ylabel('Gain (dB)')

%% Stuff on the board, fourier time domain plot

e = 0.7648;
wo = 2000*pi;

%h = 1./sqrt(1+e.^2*(w/wo).^6);

A = 2.5;
j = sqrt(-1);
T = 1/1000;
c0 = 2.5;
t0 = -3*T;
tf = 3*T;
dt = T/100;
t = t0:dt:tf;

v = c0 * ones(size(t));
w = wo;

%h = 1./sqrt(1+e.^2*(w/wo).^6);\

n = [1:2:11];
cn = (2*A./(pi.*n)).*sin(n.*pi./2)
    
    %v = v + h*Cn*exp(j*n*wo*(t)) + h*Cn*exp(-j*n*wo*(t));


num = 11;




stem(n,abs(cn))
title('Harmonics Stem Plot')
xlabel('n')
ylabel('Cn magnitude')





















